(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};(()=>{"use strict";const t=flarum.core.compat["common/extend"],n=flarum.core.compat.app;var o=e.n(n);const r=flarum.core.compat["common/models/User"];var a=e.n(r);const i=flarum.core.compat["forum/components/IndexPage"];var s=e.n(i);function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}const p=flarum.core.compat["common/Component"];var c=e.n(p);const u=flarum.core.compat["common/helpers/avatar"];var f=e.n(u);flarum.core.compat["common/helpers/username"];const d=flarum.core.compat["common/components/Link"];var h=e.n(d),v=function(){function e(){this.users=app.store.all("online"),this.users.sort(function(e,t){return e.lastSeenAt()>t.lastSeenAt()?-1:e.lastSeenAt()<t.lastSeenAt()?1:0}),this.onlineMore=app.forum.data.relationships.onlineMore}var t=e.prototype;return t.isMore=function(){return void 0!==this.onlineMore},t.getMore=function(){return this.onlineMore.data.id},e}(),O=function(e){function t(){return e.apply(this,arguments)||this}var n,o;o=e,(n=t).prototype=Object.create(o.prototype),n.prototype.constructor=n,l(n,o);var r=t.prototype;return r.oninit=function(){app.onlineState||(app.onlineState=new v),this.more=app.onlineState.isMore()?app.onlineState.getMore():null},r.view=function(){return[m(".OnlineUsers",[m(".OnlineUsers-title",app.forum.attribute("deltamichael-online.titleoflist")),m(".OnlineUsers-wrapper",[m(".OnlineUsers-list",[app.onlineState.users.map(function(e){return m(".OnlineUsers-item",[m(h(),{href:app.route.user(e),title:e.displayName()},[f()(e,{className:"OnlineUsers-avatar"})])])})]),this.more?[m("p.OnlineUsers-more",[app.translator.trans(app.onlineState.users.length>0?"deltamichael-online.forum.andmore":"deltamichael-online.forum.online_users",{more:this.more})])]:null])])]},t}(c());o().initializers.add("deltamichael-online",function(){o().store.models.online=a(),(0,t.extend)(s().prototype,"sidebarItems",function(e){e.add("onlineUsers",m(O))})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map