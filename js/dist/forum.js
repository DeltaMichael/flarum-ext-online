(()=>{var e={n:n=>{var r=n&&n.__esModule?()=>n.default:()=>n;return e.d(r,{a:r}),r},d:(n,r)=>{for(var t in r)e.o(r,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:r[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};(()=>{"use strict";const n=flarum.reg.get("core","common/extend"),r=flarum.reg.get("core","app");var t=e.n(r);const o=flarum.reg.get("core","common/models/User");var a=e.n(o);const s=flarum.reg.get("core","forum/components/IndexPage");var l=e.n(s);const i=flarum.reg.get("core","common/Component");var c=e.n(i);const p=flarum.reg.get("core","common/helpers/avatar");var u=e.n(p);const d=flarum.reg.get("core","common/helpers/username");var f=e.n(d);const g=flarum.reg.get("core","common/components/Link");var h=e.n(g);class v{constructor(){this.users=app.store.all("online"),this.users.sort((e,n)=>e.lastSeenAt()>n.lastSeenAt()?-1:e.lastSeenAt()<n.lastSeenAt()?1:0),this.onlineMore=app.forum.data.relationships.onlineMore}isMore(){return void 0!==this.onlineMore}getMore(){return this.onlineMore.data.id}}flarum.reg.add("deltamichael-online","forum/states/OnlineState",v);class O extends(c()){oninit(){app.onlineState||(app.onlineState=new v),this.more=app.onlineState.isMore()?app.onlineState.getMore():null}view(){return[m(".OnlineUsers",[m(".OnlineUsers-title",app.forum.attribute("deltamichael-online.titleoflist")),m(".OnlineUsers-list",[app.onlineState.users.map(e=>m(".OnlineUsers-item",[m(h(),{href:app.route.user(e),title:e.displayName()},[u()(e,{className:"OnlineUsers-avatar"}),f()(e,{className:"OnlineUsers-username"})])]))]),this.more?[m("p.OnlineUsers-more",[app.translator.trans(app.onlineState.users.length>0?"deltamichael-online.forum.andmore":"deltamichael-online.forum.online_users",{more:this.more})])]:null])]}}flarum.reg.add("deltamichael-online","forum/components/OnlineUsers",O),t().initializers.add("deltamichael-online",()=>{t().store.models.online=a(),(0,n.extend)(l().prototype,"sidebarItems",function(e){e.add("onlineUsers",m(O))})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map