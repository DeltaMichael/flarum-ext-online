{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3ER,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,mBCAlF,MAAM,EAA+BI,OAAOC,IAAIP,IAAI,OAAQ,iBCAtD,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,O,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,sB,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,8B,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,oB,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,yB,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,2B,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,0B,aCA7C,MAAMQ,EACnB,WAAAC,GACEC,KAAKC,MAAQC,IAAIC,MAAMC,IAAI,UAC3BJ,KAAKC,MAAMI,KAAK,CAACvB,EAAGwB,IACdxB,EAAEyB,aAAeD,EAAEC,cACb,EAENzB,EAAEyB,aAAeD,EAAEC,aACd,EAEF,GAETP,KAAKQ,WAAaN,IAAIO,MAAMC,KAAKC,cAAcH,UACjD,CACA,MAAAI,GACE,YAAkC,IAApBZ,KAAKQ,UACrB,CACA,OAAAK,GACE,OAAOb,KAAKQ,WAAWE,KAAKI,EAC9B,EAEFlB,OAAOC,IAAIkB,IAAI,sBAAuB,2BAA4BjB,GChBnD,MAAMkB,UAAoB,KACvC,MAAAC,GACOf,IAAIgB,cACPhB,IAAIgB,YAAc,IAAIpB,GAExBE,KAAKmB,KAAOjB,IAAIgB,YAAYN,SAAWV,IAAIgB,YAAYL,UAAY,IACrE,CACA,IAAAO,GACE,MAAO,CAACC,EAAE,eAAgB,CAACA,EAAE,qBAAsBnB,IAAIO,MAAMa,UAAU,oCAAqCD,EAAE,oBAAqB,CAACnB,IAAIgB,YAAYjB,MAAMsB,IAAIC,GACrJH,EAAE,oBAAqB,CAACA,EAAE,IAAM,CACrCI,KAAMvB,IAAIwB,MAAMF,KAAKA,GACrBG,MAAOH,EAAKI,eACX,CAAC,IAAOJ,EAAM,CACfK,UAAW,uBACT,IAASL,EAAM,CACjBK,UAAW,gCAET7B,KAAKmB,KAAO,CAACE,EAAE,qBAAsB,CAACnB,IAAI4B,WAAWC,MAAM7B,IAAIgB,YAAYjB,MAAM+B,OAAS,EAAI,oCAAsC,yCAA0C,CAClLb,KAAMnB,KAAKmB,UACL,OACV,EAEFvB,OAAOC,IAAIkB,IAAI,sBAAuB,+BAAgCC,GCtBtE,iBAAiBD,IAAI,sBAAuB,KAC1C,UAAUkB,OAAOC,OAAS,KAC1B,IAAAC,QAAO,cAAqB,eAAgB,SAAUC,GACpDA,EAAMrB,IAAI,cAAeM,EAAEL,GAC7B,I","sources":["webpack://@deltamichael/flarum-ext-online/webpack/bootstrap","webpack://@deltamichael/flarum-ext-online/webpack/runtime/compat get default export","webpack://@deltamichael/flarum-ext-online/webpack/runtime/define property getters","webpack://@deltamichael/flarum-ext-online/webpack/runtime/hasOwnProperty shorthand","webpack://@deltamichael/flarum-ext-online/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@deltamichael/flarum-ext-online/external root \"flarum.reg.get('core', 'app')\"","webpack://@deltamichael/flarum-ext-online/external root \"flarum.reg.get('core', 'common/models/User')\"","webpack://@deltamichael/flarum-ext-online/external root \"flarum.reg.get('core', 'forum/components/IndexPage')\"","webpack://@deltamichael/flarum-ext-online/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@deltamichael/flarum-ext-online/external root \"flarum.reg.get('core', 'common/helpers/avatar')\"","webpack://@deltamichael/flarum-ext-online/external root \"flarum.reg.get('core', 'common/helpers/username')\"","webpack://@deltamichael/flarum-ext-online/external root \"flarum.reg.get('core', 'common/components/Link')\"","webpack://@deltamichael/flarum-ext-online/./src/forum/states/OnlineState.js","webpack://@deltamichael/flarum-ext-online/./src/forum/components/OnlineUsers.js","webpack://@deltamichael/flarum-ext-online/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/User');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/IndexPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/avatar');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/username');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Link');","export default class OnlineState {\n  constructor() {\n    this.users = app.store.all('online');\n    this.users.sort((a, b) => {\n      if (a.lastSeenAt() > b.lastSeenAt()) {\n        return -1;\n      }\n      if (a.lastSeenAt() < b.lastSeenAt()) {\n        return 1;\n      }\n      return 0;\n    });\n    this.onlineMore = app.forum.data.relationships.onlineMore;\n  }\n  isMore() {\n    return typeof this.onlineMore !== 'undefined';\n  }\n  getMore() {\n    return this.onlineMore.data.id;\n  }\n}\nflarum.reg.add('deltamichael-online', 'forum/states/OnlineState', OnlineState);","import Component from 'flarum/common/Component';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\nimport OnlineState from '../states/OnlineState';\nexport default class OnlineUsers extends Component {\n  oninit() {\n    if (!app.onlineState) {\n      app.onlineState = new OnlineState();\n    }\n    this.more = app.onlineState.isMore() ? app.onlineState.getMore() : null;\n  }\n  view() {\n    return [m('.OnlineUsers', [m('.OnlineUsers-title', app.forum.attribute('deltamichael-online.titleoflist')), m('.OnlineUsers-list', [app.onlineState.users.map(user => {\n      return m('.OnlineUsers-item', [m(Link, {\n        href: app.route.user(user),\n        title: user.displayName()\n      }, [avatar(user, {\n        className: 'OnlineUsers-avatar'\n      }), username(user, {\n        className: 'OnlineUsers-username'\n      })])]);\n    })]), this.more ? [m('p.OnlineUsers-more', [app.translator.trans(app.onlineState.users.length > 0 ? 'deltamichael-online.forum.andmore' : 'deltamichael-online.forum.online_users', {\n      more: this.more\n    })])] : null])];\n  }\n}\nflarum.reg.add('deltamichael-online', 'forum/components/OnlineUsers', OnlineUsers);","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/app';\nimport User from 'flarum/common/models/User';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport OnlineUsers from './components/OnlineUsers';\napp.initializers.add('deltamichael-online', () => {\n  app.store.models.online = User;\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    items.add('onlineUsers', m(OnlineUsers));\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","reg","OnlineState","constructor","this","users","app","store","all","sort","b","lastSeenAt","onlineMore","forum","data","relationships","isMore","getMore","id","add","OnlineUsers","oninit","onlineState","more","view","m","attribute","map","user","href","route","title","displayName","className","translator","trans","length","models","online","extend","items"],"sourceRoot":""}